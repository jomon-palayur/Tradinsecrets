// Extend Map with a helper method that checks whether an item has changed
// Checking that all nested properties match when providing an object
class Cache extends Map {
  changed(key, val) {
    const item = this.get(key)

    if (!item) return true

    if (typeof val === "object") {
      return Object.entries(val).some(([key, val]) => item[key] !== val)
    }

    return item !== val
  }
}

export default Cache
