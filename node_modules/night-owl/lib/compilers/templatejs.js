import load from "../utils/load.js"
import { getContentDependencies } from "../utils/get-dependencies.js"

export default async (content, filename, options) => {
  const dependencies = getContentDependencies(content, filename)

  const data = await load(filename, dependencies.length > 0, options)

  const render = data.render
  delete data.render

  return {
    render,
    dependencies,
    data,
  }
}
